<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.game.dao.AdminuserMapper" >
  <resultMap id="BaseResultMap" type="com.game.entity.Adminuser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Apr 24 18:11:04 CST 2017.
    -->
    <id column="adminId" property="adminid" jdbcType="INTEGER" />
    <result column="roleId" property="roleid" jdbcType="INTEGER" />
    <result column="adminName" property="adminname" jdbcType="VARCHAR" />
    <result column="adminPass" property="adminpass" jdbcType="VARCHAR" />
    <result column="email" property="email" jdbcType="VARCHAR" />
    <association property="roleinfo" select="getRoleinfoById" column="roleId"></association>
  </resultMap>
  <select id="checkExistUser" parameterType="java.util.Map" resultType="Adminuser">
  	select * from adminuser where adminName=#{username} and adminPass=#{userpass}
  </select>
  <select id="getRoleinfoWithPaging" parameterType="java.util.Map" resultMap="BaseResultMap">
	  select * from adminuser
	   <where>
	   	<if test="adminname!=null">
	   		and adminname like concat('%',#{adminname},'%')
	   	</if>
	   </where>
   		limit #{skip},#{take}
  </select>
  
  <select id="getRoleinfoById" parameterType="java.lang.Integer" resultType="Roleinfo">
  	select * from roleinfo where roleid =#{roleId}
  </select>
  
  <select id="getAdminCount" parameterType="java.lang.String" resultType="long">
  	select count(*) from adminuser
  	<where>
	  	<if test="_parameter!=null">
	  		and adminname like concat('%',#{_parameter},'%')
	  	</if>
  	</where>
  
  </select>
  
  <insert id="insertAdminuser" parameterType="Adminuser">
  	insert into adminuser(adminname,adminpass,roleid) values(#{adminname},#{adminpass},#{roleid})
  </insert>
  
  <delete id="deleteEmpById" parameterType="java.lang.Integer">
  	delete from adminuser where adminid=#{id}
  </delete>
  <select id="getAdminuserById" parameterType="java.lang.Integer" resultMap="BaseResultMap">
  	select * from adminuser where adminid=#{id}
  </select>
  <update id="updateEmpById" parameterType="Adminuser">
  	update adminuser set adminname=#{adminname},adminpass=#{adminpass},roleid=#{roleid} where adminid=#{adminid}
  </update>
  <select id="checkExitEmpById" parameterType="java.lang.Integer" resultType="java.lang.Integer">
  	select * from adminuser where roleid=#{id}
  </select>
</mapper>