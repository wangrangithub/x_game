<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.game.dao.RoleinfoMapper" >
  <resultMap id="BaseResultMap" type="com.game.entity.Roleinfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Apr 24 18:11:04 CST 2017.
    -->
    <id column="roleId" property="roleid" jdbcType="INTEGER" />
    <result column="roleName" property="rolename" jdbcType="VARCHAR" />
    <result column="roleDesc" property="roledesc" jdbcType="VARCHAR" />
  </resultMap>
  		
  	   
	  <select id="getRoleinfoWithPaging" parameterType="java.util.Map" resultType="Roleinfo">
		  select r.*,(select count(*) adminname from adminuser a where a.roleid=r.roleid) adminCount from roleinfo r 
		  <where>
		  	<if test="rolename!=null">
		  		and rolename like concat('%',#{rolename},'%')
		  	</if>
		  </where>
	  		limit #{skip},#{take}
	  </select>
	  <select id="getRoleinfoCount" parameterType="java.lang.String" resultType="long"> 
	  	select count(*) from roleinfo 
	
		<where>
			<if test="_parameter!=null">
				and rolename like concat ('%',#{_parameter},'%')
			</if>
		</where>
	
		</select>
	  <select id="getAllRoleinfoList" resultType="Roleinfo">
	  	select * from roleinfo
	  </select>
	  <insert id="insertRoleinfo" parameterType="Roleinfo" useGeneratedKeys="true">
	  	insert into roleinfo(rolename) values(#{rolename})
	  </insert>	
	  
	  <select id="getRoleidByName" parameterType="java.lang.String" resultType="java.lang.Integer">
	  	select * from roleinfo where rolename=#{rolename}
	  </select>
	  <delete id="deleteRoleinfoById" parameterType="java.lang.Integer">
	  	delete from roleinfo where roleid=#{id}
	  </delete>
	  <select id="getJurisdictionById" parameterType="java.lang.Integer" resultType="Roleinfo">
  		select r.*,(select count(*) adminname from adminuser a where a.roleid=r.roleId) adminCount
		from roleinfo r where r.roleid=#{id}
 	  </select>
	  <update id="updateRoleinfo" parameterType="Roleinfo">
  		update roleinfo set rolename=#{rolename} where roleid=#{roleid}
  	  </update>
</mapper>